function editarformuladotipo(e){if($("#tipoparametrizar").modal("show"),e>=0){var a=document.getElementById("bd").value;$("#popemp").html("Parametrizar por Tipo de Producto"),$("#formuladotipo").html($("#tipo"+e).html()),$("#idtipo").html(e),$.ajax({method:"POST",url:"ajax/administrador/apiparametrizar.php",data:{rvpass:16,bd:a,idtipo:e}}).done(function(e){$("#paralocales").html(""),$("#paralocales").html(e)})}}function actualizartipo(){for(var e=document.getElementById("bd").value,a=$("#idtipo").html(),t=document.getElementById("paralocales").getElementsByTagName("select"),o="",n=0;n<t.length;n++){var r=t[n].id;if("valorx"==r.substr(0,6)){var d=r.substr(6);if(""!=document.getElementById("valorx"+d).value){o+=d+"//"+document.getElementById("valorx"+d).value+"|"}}}for(var l=document.getElementById("paralocales").getElementsByTagName("select"),c="",i=0;i<l.length;i++){var m=l[i].id;if("valorsi"==m.substr(0,7)){var u=m.substr(7);if(""!=document.getElementById("valorsi"+u).value){c+=u+"//"+document.getElementById("valorsi"+u).value+"|"}}}for(var s=document.getElementById("paralocales").getElementsByTagName("select"),v="",p=0;p<s.length;p++){var g=s[p].id;if("valorv"==g.substr(0,6)){var h=g.substr(6);if(""!=document.getElementById("valorv"+h).value){v+=h+"//"+document.getElementById("valorv"+h).value+"|"}}}for(var f=document.getElementById("paralocales").getElementsByTagName("select"),b="",y=0;y<f.length;y++){var E=f[y].id;if("valorco"==E.substr(0,7)){var B=E.substr(7);if(""!=document.getElementById("valorco"+B).value){b+=B+"//"+document.getElementById("valorco"+B).value+"|"}}}for(var I=document.getElementById("paralocales").getElementsByTagName("select"),x="",j=0;j<I.length;j++){var T=I[j].id;if("valorceco"==T.substr(0,9)){var z=T.substr(9);if(""!=document.getElementById("valorceco"+z).value){x+=z+"//"+document.getElementById("valorceco"+z).value+"|"}}}$.ajax({method:"POST",url:"ajax/administrador/apiparametrizar.php",data:{rvpass:17,bd:e,idtipo:a,datos:o,datossi:c,datosc:v,datosco:b,datosceco:x}}).done(function(e){$("#tipoparametrizar").modal("hide"),$("#paralocales").html("<tr><td style='text-align:center;'><img src='gfx/loader.gif' width='40px'/></td></tr>")})}function Cargar(e){1==e&&$("#tableeventos").html("<tr><td style='text-align:center;'>Cargando...<br/><img src='gfx/loader.gif' width='40px'/></td></tr>"),2==e&&$("#contentretenciones").html("<div style='text-align:center;'>Cargando...<br/><img src='gfx/loader.gif' width='40px'/></div>"),3==e&&$("#contentfacturacion").html("<div style='text-align:center;'>Cargando...<br/><img src='gfx/loader.gif' width='40px'/></div>"),$.ajax({method:"POST",url:"ajax/administrador/cargarparametrizar.php",data:{que:e}}).done(function(a){if(1==e&&$("#tableeventos").html(a),2==e&&$("#contentretenciones").html(a),3==e){$("#contentfacturacion").html(a);$("#cuentaabonosabajo").val()>0?$("#contabilizaabono").prop("checked",!0):$("#contabilizaabono").prop("checked",!1)}})}function parametrizaevento(e){var a=document.getElementById("bd").value,t=document.getElementById("cuentaevento"+e).value;$.ajax({method:"POST",url:"ajax/administrador/apiparametrizar.php",data:{rvpass:18,bd:a,idevento:e,cuenta:t}}).done(function(a){console.log(a),"ok"==a&&$("#cuentaevento"+e).effect()})}function GuardarRetenciones(){$("#btnguardarret").html("Guardando...");var e=$("#formretenciones");$.ajax({method:"POST",url:"ajax/administrador/apiparametrizar.php",data:e.serialize()}).done(function(e){console.log(e),"OK"==e&&$("#btnguardarret").html("Guardar")})}function GuardarFacturacion(){$("#btnguardafact").html("Guardando....");var e=0,a="",t="",o="",n=document.getElementById("bd").value;$(".cajasventa").each(function(){e>0&&(a+="@"),a+=$(this).attr("id")+"_"+$(this).val(),e++}),e=0,$(".cards").each(function(){e>0&&(t+="@"),t+=$(this).attr("id")+"_"+$(this).val(),e++}),e=0,$(".otras").each(function(){e>0&&(o+="@"),o+=$(this).attr("id")+"_"+$(this).val(),e++});var r=0;$("#contabilizaabono").is(":checked")&&(r=1);var d=r+"|"+$("#cuentaabonosabajo").val(),l=14;$(".micheck").each(function(){$(this).is(":checked")&&(l=$(this).val())}),l=document.getElementById("eliva").value;var c="false";$("#vextranjero").is(":checked")&&(c="true"),$.ajax({method:"POST",url:"ajax/administrador/apiparametrizar.php",data:{rvpass:21,cajaventas:a,bd:n,tarjetas:t,otras:o,cuentaiva:$("#cuentaiva").val(),cuentaser:$("#cuentaser").val(),cuentaprop:$("#cuentaprop").val(),contabonos:d,valoriva:l,ventasextranjero:c,cuentaivacomp:$("#cuentaivacomp").val(),cuentaiceven:$("#cuentaiceven").val()}}).done(function(e){"OK"==e&&$("#btnguardafact").html("Guardar")})}function GuardarCentrodeCosto(){var e=document.getElementById("bd").value,a=document.getElementById("nombreCentrodeCosto").value,t=document.getElementById("idcc").value;$.ajax({method:"POST",url:"ajax/administrador/editcentrocosto.php",data:{action:2,bd:e,id:t,centrocosto:a}}).done(function(e){alert(e),location.reload()})}function NuevoCentrodeCosto(){var e=document.getElementById("bd").value,a=document.getElementById("centrocostoName").value;$.ajax({method:"POST",url:"ajax/administrador/editcentrocosto.php",data:{action:2,bd:e,centrocosto:a}}).done(function(e){alert(e),location.reload()})}function editarcentrodecosto(e){$("#centrocostoModal").modal("show");var a=document.getElementById("bd").value;$.ajax({method:"POST",url:"ajax/administrador/editcentrocosto.php",data:{action:1,bd:a,id:e}}).done(function(e){var a=jQuery.parseJSON(e);document.getElementById("nombreCentrodeCosto").value=a.centrocosto,document.getElementById("idcc").value=a.id,console.log(a)})}function editarRenta(e){$("#tablarentaModal input").css("border","gray solid 1px"),$("#tablarentaModal").modal("show");var a=document.getElementById("bd").value;$.ajax({method:"POST",url:"ajax/administrador/editrenta.php",data:{action:"Show",bd:a,id:e}}).done(function(e){var a=jQuery.parseJSON(e);document.getElementById("parametro").value=a.parametro,document.getElementById("idrenta").value=a.id,document.getElementById("valor").value=a.valor,document.getElementById("desde").value=a.desde,document.getElementById("hasta").value=a.hasta,document.getElementById("porcentaje").value=a.porcentaje,document.getElementById("anio").value=a.anio,a.es_base.localeCompare("t")?document.getElementById("es_base").checked=!1:document.getElementById("es_base").checked=!0,console.log(a)})}function GuardarRenta(){var e=document.getElementById("bd").value,a=document.getElementById("idrenta").value,t=!0;$("#tablarentaModal input").each(function(){""!=$(this).val()?console.log("all inputs filled"):(console.log("theres an empty input"),console.log(this.name),$(this).css("border","red solid 1px"),"es_base"!=this.name&&(t=!1))}),t?$.ajax({method:"POST",url:"ajax/administrador/editrenta.php",data:$("#rentaForm").serialize()+"&action=Edit&bd="+e+"&id="+a}).done(function(e){alert(e),location.reload()}):alert("Ingrese toda la informaci√≥n")}